<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta and CSS links here -->
</head>
<body>
    <main id="main" class="main">
        <div class="container">
            <h1>Sales Report</h1>
            <div class="filter">
                <label for="date-range">Custom Date Range:</label>
                <input type="date" id="start-date"> to 
                <input type="date" id="end-date">
                <button onclick="filterReport()" class="btn btn-primary">Filter</button>
            </div>
            <div class="filter">
                <label for="preset-range">Preset Date Range:</label>
                <select id="preset-range" onchange="presetFilter()">
                    <option value="">Select Preset</option>
                    <option value="1-day">1 Day</option>
                    <option value="1-week">1 Week</option>
                    <option value="1-month">1 Month</option>
                </select>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>Date</th>
                        <th>Customer Name</th>
                        <th>Order Amount</th>
                        <th>Discount</th>
                        <th>Coupon Deduction</th>
                        <th>GST Amount</th>
                        <th>Final Amount</th>
                        <th>Payment Status</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each orders}}
                    <tr>
                        <td>{{orderId}}</td>
                        <td>{{formatDate createdAt}}</td>
                        <td>{{userId.name}}</td>
                        <td>{{summary.totalAmountToBePaid}} ₹</td>
                        <td>{{summary.totalDiscount}} ₹</td>
                        <td>{{#if coupon.discountAmount}}{{coupon.discountAmount}}{{else}}0.00{{/if}} ₹</td>
                        <td>{{totalGst}} ₹</td>
                        <td>{{summary.discountedPrice}} ₹</td>
                        <td>{{paymentStatus}}</td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
            <div class="summary">
                <div>Overall Sales Count: {{totalSalesCount}}</div>
                <div>Overall Order Amount: {{totalOrderAmount}} ₹</div>
                <div>Overall Discount: {{totalDiscount}} ₹</div>
                <div>Overall Coupon Discount: {{totalCouponDiscount}} ₹</div>
                <div>Overall GST Amount: {{totalGst}} ₹</div>
                <div>Overall Revenue: {{totalRevenue}} ₹</div>
            </div>
            <button onclick="downloadPDF()" class="btn btn-danger">Download PDF</button>
            <button onclick="downloadAsExcel()" class="btn btn-warning">Download as Excel</button>
        </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
    <script>
        function filterReport() {
            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;
            const queryParams = startDate && endDate ? `?startDate=${startDate}&endDate=${endDate}` : '';
            window.location.href = `/admin/salesReport${queryParams}`;
        }

        function presetFilter() {
            const presetRange = document.getElementById('preset-range').value;
            if (presetRange) {
                window.location.href = `/admin/salesReport?presetRange=${presetRange}`;
            }
        }

        function downloadPDF() {
            // Implement PDF download logic
        }

        function downloadAsExcel() {
            // Implement Excel download logic
        }
    </script>
</body>
</html>
